# 性能优化

[TOC]

## 一、崩溃

### 1. 如何捕获

​	java层崩溃：`Thread.setDefaultUncaughtExceptionHandler(this);`

   native层崩溃：breakpad(跨平台，体量大)、bugly(需要上传符号表)等。

​	**breadpad使用步骤：**

1. 导入breakpad模块，里面定义了native crash捕获的头文件；

2. 制造崩溃，生成*.dmp文件，上传至服务器；

3. 执行命令 `./tools/mac/minidump_stackwalk crashDump/***.dmp >crashLog.txt `；

4. 查找崩溃函数(debug版的so)

   ```java
   arm-linux-androideabi-addr2line -f -C -e sample/build/intermediates/transforms/mergeJniLibs/debug/0/lib/armeabi-v7a/libcrash-lib.so 0x77e                           
   //输出结果如下
   Crash()
   ```

### 2. 衡量标准

崩溃率 = 崩溃次数/启动次数；

标准： Anroid 0.3%、IOS 0.15%(日活越多崩溃率越低);

[参考](https://www.cnblogs.com/umengplus/p/14819877.html)

### 3. 问题

