(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{359:function(t,e,v){t.exports=v.p+"assets/img/launcher_view_structure.7ade9c14.png"},360:function(t,e,v){t.exports=v.p+"assets/img/launcher_start.e7bcf1cc.png"},384:function(t,e,v){"use strict";v.r(e);var a=v(42),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"launcher启动流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#launcher启动流程"}},[t._v("#")]),t._v(" Launcher启动流程")]),t._v(" "),a("p",[t._v("[TOC]")]),t._v(" "),a("h2",{attrs:{id:"_1-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-介绍"}},[t._v("#")]),t._v(" 1. 介绍")]),t._v(" "),a("blockquote",[a("p",[t._v("Launcher是系统初始化后启动的"),a("strong",[t._v("第一个应用程序")]),t._v("，负责展示系统中所有app到桌面，并进行响应。单单从应用角度来讲，Launcher是其他的应用一样，也是packages/apps/下面的一个apk。")]),t._v(" "),a("p",[t._v("主要包含： LauncherActivity、LauncherAppsService等")])]),t._v(" "),a("p",[t._v("​\tLauncher本质上就是一个app，用来对手机上其他app进行管理或启动。才代码上来说多了"),a("code",[t._v('<category android:name="android.intent.category.HOME" />')]),t._v("属性，单击home键会跳转到这个界面。")]),t._v(" "),a("blockquote",[a("p",[t._v("Launcher本质上是一个App(HomeAPP)，系统启动后第一个启动，清单文件类型为"),a("code",[t._v("android.intent.category.LAUNCHER")]),t._v(".")])]),t._v(" "),a("ol",[a("li",[t._v("系统启动时，Zygote进程fork出SystemServer进程，执行SystemServer.java类；")]),t._v(" "),a("li",[t._v("SystemServer会启动AMS、PMS以及其他service;")]),t._v(" "),a("li",[t._v("PMS解析本地应用，并把数据信息保存起来(包括launcher app)；")]),t._v(" "),a("li",[t._v("AMS触发systemReady(...)方法，其中执行了startHomeActivity(...);")]),t._v(" "),a("li",[t._v("构建home intent,然后通过PMS查找到一个符合HomeIntent的Activity；")]),t._v(" "),a("li",[t._v("启动Acitvity。")])]),t._v(" "),a("h2",{attrs:{id:"_2-桌面基本结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-桌面基本结构"}},[t._v("#")]),t._v(" 2. 桌面基本结构")]),t._v(" "),a("p",[t._v("​\t桌面其实是一个Activity，只是与平常的应用不同，它用来显示图标、Widget和文件夹等。")]),t._v(" "),a("p",[t._v("UI结构如下：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Workspace层")]),t._v(" "),a("p",[t._v("手机显示父组件。")])]),t._v(" "),a("li",[a("p",[t._v("DragLayter层")]),t._v(" "),a("p",[t._v("拖动层。")])]),t._v(" "),a("li",[a("p",[t._v("Celllayout层")]),t._v(" "),a("p",[t._v("一个workspace包含多个celllayout，多个横向并排显示，每个宽度占满屏幕，用来显示其他应用图标。")])]),t._v(" "),a("li",[a("p",[t._v("PageIndiator层")]),t._v(" "),a("p",[t._v("指示器")])]),t._v(" "),a("li",[a("p",[t._v("Hotset")]),t._v(" "),a("p",[t._v("放置短信、电话等常用应用图标。拖动时不滑动。")]),t._v(" "),a("p",[t._v("当用户长按桌面时，中间的CellLayout会缩小，下面的Hotseat和上面的SearchDropTargetView会隐藏，从而显示出隐藏的三个菜单按钮。")])])]),t._v(" "),a("p",[a("img",{attrs:{src:v(359),alt:"launcher_view"}})]),t._v(" "),a("h4",{attrs:{id:"启动流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动流程"}},[t._v("#")]),t._v(" 启动流程")]),t._v(" "),a("ol",[a("li",[t._v("系统启动时，Zygote进程fork出SystemServer进程，执行SystemServer.java类；")]),t._v(" "),a("li",[t._v("SystemServer会启动AMS、PMS以及其他service;")]),t._v(" "),a("li",[t._v("PMS解析本地应用，并把数据信息保存起来(包括launcher app)；")]),t._v(" "),a("li",[t._v("AMS触发systemReady(...)方法，其中执行了startHomeActivity(...);")]),t._v(" "),a("li",[t._v("构建home intent,然后通过PMS查找到一个符合HomeIntent的Activity；")]),t._v(" "),a("li",[t._v("启动Acitvity。")])]),t._v(" "),a("p",[a("img",{attrs:{src:v(360),alt:"launcher_start"}})])])}),[],!1,null,null,null);e.default=r.exports}}]);