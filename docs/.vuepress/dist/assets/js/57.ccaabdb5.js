(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{416:function(a,t,s){"use strict";s.r(t);var r=s(42),e=Object(r.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"i-o优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-o优化"}},[a._v("#")]),a._v(" I/O优化")]),a._v(" "),s("p",[a._v("[TOC]")]),a._v(" "),s("h3",{attrs:{id:"一、io基础知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、io基础知识"}},[a._v("#")]),a._v(" 一、IO基础知识")]),a._v(" "),s("h4",{attrs:{id:"_1-文件系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-文件系统"}},[a._v("#")]),a._v(" 1. 文件系统")]),a._v(" "),s("p",[a._v("​\t好比 CPU、内存、磁盘三个小伙伴一起完成接力跑，最终跑完的时间很大程度上取决于最慢的小伙伴。我们知道，CPU 和内存相比磁盘是高速设备，整个流程的瓶颈在于磁盘 I/O 的性能。所以很多时候，文件系统性能比磁盘性能更加重要，为了降低磁盘对应用程序的影响，文件系统需要通过各种各样的手段进行优化。那么接下来，我们首先来看文件系统。")]),a._v(" "),s("p",[a._v("​\t"),s("strong",[a._v("文件系统：")])]),a._v(" "),s("ul",[s("li",[a._v("Windows : FAT16、FAT32、NTFS。")]),a._v(" "),s("li",[a._v("Linux: Ext2、Ext3、Ext4。")]),a._v(" "),s("li",[a._v("Mac：HFS+。")]),a._v(" "),s("li",[a._v("IOS：HFS+、APFS(Apple File System)。")]),a._v(" "),s("li",[a._v("Android: ext4、F2FS(华为在EMUI5.0后使用，以后的主流文件系统)。")])]),a._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"images/apm_io_fs.png"}}),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//通过/proc/meminfo 查看内存情况 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MemTotal")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2866492")]),a._v(" kB\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MemFree")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("72192")]),a._v(" kB\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Buffers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("62708")]),a._v(" kB      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Buffer Cache")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Cached")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("652904")]),a._v(" kB      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Page Cache")]),a._v("\n")])])]),s("h4",{attrs:{id:"_2-磁盘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-磁盘"}},[a._v("#")]),a._v(" 2. 磁盘")]),a._v(" "),s("p",[a._v("​\t正如我上面所说，如果发现应用程序要 read() 的数据没有在页缓存中，这时候就需要真正向磁盘发起 I/O 请求。这个过程要先经过内核的通用块层、I/O 调度层、设备驱动层，最后才会交给具体的硬件设备处理。")]),a._v(" "),s("h3",{attrs:{id:"二、i-o测量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、i-o测量"}},[a._v("#")]),a._v(" 二、I/O测量")]),a._v(" "),s("h4",{attrs:{id:"_1-proc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-proc"}},[a._v("#")]),a._v(" 1. proc")]),a._v(" "),s("h4",{attrs:{id:"_2-strace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-strace"}},[a._v("#")]),a._v(" 2. strace")]),a._v(" "),s("h4",{attrs:{id:"_3-vmstat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-vmstat"}},[a._v("#")]),a._v(" 3. Vmstat")]),a._v(" "),s("h3",{attrs:{id:"三、i-o的三种方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、i-o的三种方式"}},[a._v("#")]),a._v(" 三、I/O的三种方式")]),a._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"images/apm_io_three_type.png"}})])}),[],!1,null,null,null);t.default=e.exports}}]);